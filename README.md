## Описание данных

**Источники:** https://www.unipage.net/en/universities, https://databank.worldbank.org/, https://knoema.ru

Файл объединяет результаты парсинга университетов с сайта **Unipage**  
и экономические показатели стран, полученные через **API (World Bank - открытые запросы API и Knoema - API через ключ)**.  
Наша цель — понять, **как рейтинг университета (QS Rank)** связан с внутренними характеристиками вуза  
и внешними условиями страны.

---
Значение перменных в итоговом датасете:
### Университетские признаки

- **name** — название университета.  
- **url** — ссылка на университет на сайте Unipage.
- **country** — кодировка страны, в которой находится университет.
- **location** и **location_full**— показывает еще и город, в котором находится университет.
  Эти признаки нужны, чтобы понимать **географическое распределение** и **условия страны**,  
  а также для последующего объединения с экономическими данными.  

---

### Мировые рейтинги университетов
- **qs_ranking_preview** (целевой признак) - **QS World University Rankings** - международный рейтинг университетов, один из самых известных в мире университетов, который публикуется компанией Quacquarelli Symonds (QS). Как выставляется:
    - Academic Reputation (40%) — мнение преподавателей и учёных по всему миру
    - Employer Reputation (10%) — мнение работодателей о выпускниках
    - Faculty/Student Ratio (20%) — соотношение числа преподавателей к студентам
    - Citations per Faculty (20%) — количество научных цитирований на одного преподавателя
    - International Faculty Ratio (5%) — доля иностранных преподавателей
    - International Student Ratio (5%) — доля иностранных студентов.

В нашем датасете указана позиция университета (rank), поэтому чем он ниже, тем университет лучше.


- **the_ranking_preview** - THE Ranking — это международный рейтинг университетов, который публикует британское издание Times Higher Education (THE). THE оценивает университеты по 5 основным группам показателей:
    - Teaching — 29.5% - академическая репутация преподавания (опрос среди учёных), соотношение студентов и преподавателей, доля кандидатов и докторов наук среди сотрудников, доходы на одного преподавателя, число бакалавров и аспирантов (баланс уровней обучения).

    - Research Environment — 29% - насколько активно университет занимается наукой: репутацию исследований (опрос учёных), объём публикаций (сколько статей выпускают), доходы от исследований (гранты, финансирование).

    - Research Quality — 30% - влияние и значимость научных работ: цитируемость (как часто ссылаются на публикации), международное соавторство, доля статей в высокорейтинговых журналах, качество и устойчивость исследовательских результатов.

    - International Outlook — 7.5% - доля иностранных студентов и преподавателей, международные соавторства (долю международных научных публикаций)

    - Industry Income — 4% - сотрудничество с бизнесом и вклад в экономику: доходы от контрактных исследований,передачу технологий (патенты, разработки, внедрение инноваций).

- **arwu_ranking_preview** - это международный рейтинг университетов, который публикует ShanghaiRanking Consultancy (Китай), известен как Шанхайский рейтинг:
    - Alumni (10%) — сколько выпускников получили Нобелевскую премию или медаль Филдса.

    - Award (20%) — сколько преподавателей получили Нобеля или Филдса.

    - HiCi (20%) — сколько высокоцитируемых учёных работает в университете.

    - N&S (20%) — сколько научных статей опубликовано в журналах Nature и Science.

    - PUB (20%) — общее число публикаций в международных научных базах.

    - PCP (10%) — результат университета, поделённый на количество сотрудников (то есть продуктивность на одного человека).


В датасете так же представлены переменные **qs_rating**, **the_rating**, **rating_usa**, которые продублировались во время извлечения всех рейтингов, просто в другом типовом признаке

Эти рейтинги измеряются в **позициях (местах)** — чем меньше значение, тем **лучше место**.  
Основная целевая переменная в проекте — `qs_ranking_preview`,  
так как она считается самой репрезентативной и включает как академическую, так и деловую репутацию.  

---

### Стоимость обучения и масштаб университета

- **bachelor_from / bachelor_to**, **master_from / master_to**, **doctorate_from / doctorate_to** —  диапазоны стоимости обучения для разных степеней.  
  Единицы — **доллары США в год**. Эти данные нужны, чтобы проверить, связано ли качество образования и место в рейтинге с уровнем стоимости обучения.  
- **total_students** — общее количество студентов (измеряется в людях).  
- **international_students** — доля иностранных студентов (%).  
  Важный показатель **интернациональности** и открытости университета..  

- **female_students** — доля студенток (%).  

- **acceptance_rate** — процент поступления (%).  
  Чем ниже данный показатель, тем сложнее поступить в вуз, то есть  acceptance_rate показывает, насколько селективен и престижен университет.  

- **establishment_year** — год основания. Старые университеты часто имеют более высокий рейтинг благодаря накопленной репутации.
- **school_enrollment_tert** — (API: World Bank) уровень охвата высшим образованием - показывает, какой процент людей, формально относящихся к возрасту обучения в вузах, реально учатся в университетах
- **adult_literacy_rate** — (API: World Bank) Уровень грамотности среди взрослого населения (% населения в возрасте 15 лет и старше).

---

### Экономические показатели стран (через API)

- **gdp_total_usd** — общий ВВП страны (в долларах США).  
  Источник: *World Bank*.  
  Рассчитывается как **суммарная стоимость всех товаров и услуг**, произведённых в стране за год.  
  Добавлен, чтобы оценить, как **экономическая мощь страны** влияет на развитие университетов.  

- **unemployment_rate** — уровень безработицы (%).  
  Источник: *World Bank*.  
  Показывает долю безработных среди трудоспособного населения. Уровень безработицы считается как доля людей, активно ищущих работу, но не имеющих её, от общей численности рабочей силы, выраженная в процентах.
  Может отражать **стабильность экономики и уровень жизни**, что влияет на привлекательность образования.  

- **economic_freedom_score** — индекс экономической свободы (0–100 баллов).  
  Источник: *Knoema API / Heritage Foundation*.  
  Состоит из 12 компонентов, включая эффективность правительства, права собственности, открытость рынков. Каждый компонент оценивается по 100-балльной шкале, а итоговый показатель — это среднее арифметическое всех двенадцати значений.

  Добавлен, чтобы проверить, способствует ли экономическая свобода развитию сильных университетов.  

---

### Почему выбраны эти признаки

- Университетские признаки описывают **внутренние характеристики**:  
  масштаб, стоимость, международность, селективность.  
- Экономические признаки показывают **внешние условия** страны:  
  уровень экономики, занятости и свободы бизнеса.  
- Всё это вместе помогает ответить на вопрос: в каких условиях формируются университеты, входящие в топ по QS-рейтингу.

---

### Структура и типы признаков

| Признак | Что описывает | Тип данных | Единицы измерения |
|----------|----------------|-------------|--------------------|
| **university_name** | Название университета | категориальный  | — |
| **country** | Страна расположения | категориальный | — |
| **city** | Город университета | категориальный | — |
| **target(qs_ranking_preview)** | Целевая переменная — место университета в QS | вещественный | место |
| **the_ranking_preview** | Позиция в рейтинге THE | вещественный  | место |
| **arwu_ranking_preview** | Позиция в рейтинге ARWU | вещественный  | место |
| **bachelor_from**, **bachelor_to** | Стоимость обучения на бакалавриате (от / до) | вещественный  | USD |
| **master_from**, **master_to** | Стоимость обучения в магистратуре (от / до) | вещественный | USD |
| **doctorate_from**, **doctorate_to** | Стоимость обучения на PhD (от / до) | вещественный  | USD |
| **establishment_year** | Год основания университета | вещественный | год |
| **total_students** | Общее количество студентов | вещественный | человек |
| **international_students** | Доля иностранных студентов |вещественный | % |
| **female_students** | Доля студенток | вещественный  | % |
| **acceptance_rate** | Уровень приёма студентов | вещественный  | % |
| **qs_rating**, **the_rating**, **rating_usa** | Итоговые рейтинговые оценки | вещественный  | баллы (0–100) |
| **gdp_total_usd** | ВВП страны |вещественный  | млрд USD |
| **unemployment_rate** | Уровень безработицы | вещественный  | % |
| **economic_freedom_score** | Индекс экономической свободы | вещественный  | баллы (0–100) |
| **url** | Ссылка на страницу университета | категориальный | — |

---

После анализа этих данных можно будет понять,  
какие внутренние характеристики университета и какие внешние факторы страны  
влияют на то, что вуз попадает в **топ мировых рейтингов QS**.


**Разведочный анализ данных (EDA)**

**1. Очистка данных и удаление нерелевантных признаков**

На первом этапе EDA мы удалили все признаки, которые не влияли на анализ и могли вносить избыточность в данные.
Из исходного датасета universities_final_data.csv были удалены следующие столбцы:
url, location, country_name, iso2_code, iso3_code и heritage_year.

Причины удаления:

	•	url — ссылка, не несёт смысловой нагрузки;
	•	location — в датасете оказалось две локации, оставили одну — location_full (одинаковые признаки).
	•	country_name — в датасете оказалось две страны; оставили одну — country (одинаковые признаки).
	•	iso2_code, iso3_code — коды стран больше не нужны, так как страна представлена текстом;
	•	heritage_year — год измерения индекса, не имеет аналитической ценности для задачи;

После удаления таблица стала чище и легче для анализа, осталось только то, что реально может влиять на рейтинг университетов.

---

**2. Проверка и удаление дубликатов**

На этом шаге мы проверили датасет на наличие повторяющихся строк:

data_no_full_dupes = data.drop_duplicates()

	•	Изначально было 10 000 строк, после удаления дубликатов осталось 10 000.

Дубликаты не обнаружены, значит, данные изначально были уникальны - каждая строка соответствует отдельному университету.

---

**3. Работа с пропущенными значениями**

На этом этапе мы проверили, насколько «разрежен» наш датасет и какие признаки содержат наибольшее количество пропусков. Изначальная разреженность составила 52.94%.

**5. Гипотеза о пропущенных значениях**

Наибольшая доля отсутствующих значений встречается в следующих признаках: acceptance_rate (доля принятых студентов), doctorate_from / doctorate_to (стоимость обучения на аспирантуре), the_ranking_preview, arwu_ranking_preview, rating_usa (альтернативные рейтинги).

Эти пропуски связаны не с ошибками сбора, а **с отсутствием публичных данных**.
*   Показатели вроде acceptance rate относятся к внутренней статистике приёмных комиссий, и многие университеты (особенно за пределами США и Великобритании) не раскрывают эту информацию официально.
*   Стоимость аспирантуры (doctorate_from, doctorate_to) часто определяется индивидуально и может зависеть от программы, исследовательского проекта и грантов, поэтому не публикуется в общедоступных источниках.
*   Некоторые рейтинги (например, THE, ARWU) охватывают ограниченное количество вузов, поэтому пропуски могут означать, что университет не входил в выборку рейтинга, а не то, что данные были потеряны.

1. https://www.insidehighered.com/admissions/views/2022/04/04/how-sincere-are-colleges-dont-release-their-admit-rates-opinion?utm_source=chatgpt.com (В статье на Inside Higher Ed отмечено, что некоторые элитные университеты вообще перестают публиковать данные о уровне приёма (“admit rate”) из-за того, что эти цифры вызывают сильную тревожность у абитуриентов и их семей).

2. https://www.uniadmissions.co.uk/application-guides/russell-group-acceptance-rates/?utm_source=chatgpt.com (В обзоре по приёмной кампании Великобритании отмечается: «University of Birmingham does **not publish its admissions figures publicly, so no solid acceptance rate is available»).

 Для признака country оказалось несколько строк с отсутствующим значением. При проверке выяснилось, что это университеты из Намибии, и пропуски были заполнены вручную через:

> data.loc[data["country"].isna(), "country"] = "Namibia"

**Так как qs_ranking_preview — это наща целевая переменная, оставляем только строки, где он указан.**

Результат: осталось 1 371 строка и 19 признаков.

**Удаление лишних признаков**

После анализа (data.info() и отчётов по missing values) выяснилось, что сильнее всего пропуски наблюдались в рейтингах (ARWU, THE, rating_usa) и в стоимости обучения (doctorate_from/to). Доля пропусков в них превышала 50%, поэтому эти признаки были удалены.

---

**Обработка дублирующихся признаков**

В исходном датасете после объединения данных оказалось по два признака, отвечающих за один и тот же рейтинг:
*   qs_ranking_preview и qs_rating
*   the_ranking_preview и the_rating

После проверки выяснилось, что эти пары полностью дублируют друг друга по смыслу, так как обе содержат места университетов в QS World University Ranking и THE Ranking соответственно,
но имеют разное количество пропусков, так как часть данных подтягивалась с разных страниц Unipage.

Чтобы избежать дублирования и повысить плотность данных,
мы оставили те столбцы, где меньше пропусков (qs_ranking_preview и the_rating),
а остальные удалили.

---

**Обработка пропусков в acceptance_rate**

Столбец acceptance_rate (процент поступивших студентов) оказался одним из самых незаполненных в датасете — заполнен менее чем в 40% строк.
Мы рассмотрели разные способы восстановления пропусков, но каждый из них оказался некорректным для этого признака:

*   Среднее / медиана / мода — бессмысленны, так как уровень приёма сильно зависит от страны, типа университета и его рейтинга: у топ-вузов часто <10 %, а у непопулярных и государственных вузов— >70 %. Среднее значение искажает картину.

Мы протестировали для проверки KNN-импутацию (метод ближайших соседей): отсортировали университеты по QS-рейтингу и использовали KNNImputer(n_neighbors=5), чтобы заполнять пропуски на основе ближайших соседей по рейтингу и стране.
Однако, как видно на графике ниже,
распределение после заполнения (оранжевое) сильно отличается от исходного (темно-коричневого): значения стали более равномерными и потеряли естественные пики, характерные для топ-вузов и массовых университетов.
<img width="582" height="458" alt="image" src="https://github.com/user-attachments/assets/0fb63962-db0f-4355-b504-928db16c9288" />


Это говорит о том, что KNN искусственно “сгладил” различия между странами и типами вузов, то есть внёс шум вместо информации.

Поэтому было решено не использовать никакую импутацию для acceptance_rate и полностью удалить этот признак из финального набора данных,
так как заполненные значения не отражают реальности и могут исказить результаты анализа.

После анализа пропусков по всем признакам мы рассчитали общую разреженность - она составила ~10.13%.

---
**Feature Engineering и обработка оставшихся пропусков**

После базовой очистки данных (удаления неинформативных столбцов и строк без QS-рейтинга) в датасете всё ещё оставались признаки с высокой долей пропусков, особенно в уровне грамотности (adult_literacy_rate) и некоторых характеристиках университетов.
Чтобы не терять данные, было решено применить более контекстное заполнение, основанное на географической близости.

Мы добавили новый признак — continent
Для каждой страны мы определили континент, к которому она относится.
Это было сделано через библиотеку pycountry-convert, которая переводит ISO-коды стран в континентальные регионы.

Мы сами заполнили одну страну (Намибию), так как для нее отсутствовал континент.
Теперь к каждой строке добавился столбец с одним из семи значений:
Africa, Asia, Europe, North America, South America, Australia, Antarctica

**Мы заполнили пропуски в adult_literacy_rate средними значениями по континентам:**
в странах одного региона уровень грамотности обычно схожий (например, в Европе >95%, в Африке около 60–70%).
Поэтому вместо усреднения “по миру”, мы рассчитали среднее значение грамотности отдельно для каждого континента
и заполнили пропуски именно этими локальными средними.

Мы решили объединить столбцы bachelor_from и bachelor_to, так как оба они отражают один и тот же показатель — стоимость обучения на бакалавриате, просто в виде диапазона (“от” и “до”). Чтобы не терять информацию, мы взяли среднее значение между ними, тем самым получив усреднённую стоимость обучения для каждого университета.

Аналогично, мы объединили столбцы master_from и master_to, рассчитав их среднее значение — это позволило получить единый показатель стоимости обучения на магистратуре.

В итоге, вместо четырёх разрозненных признаков мы получили два более информативных - bachelor_avg и master_avg, которые можно удобно использовать для анализа и построения моделей. Это также помогает сделать данные более компактными и логичными.

После всех замен пересчитали количество пропусков и общую разреженность таблицы.Общая разреженность: 6.45%, что является вполне допустимым уровнем. Такой объём пропусков не оказывает существенного влияния на анализ и не требует сложных методов восстановления данных.

Следовательно, мы можем без искажения статистики просто оставить эти ячейки заполненными значениями NaN. Это позволит сохранить целостность данных и при этом корректно использовать стандартные инструменты анализа и визуализации — ведь большинство аналитических библиотек автоматически игнорируют NaN при расчётах и построении графиков.
---

**4. Проверка ошибочных значений**

После очистки и объединения данных мы проверили, есть ли в числовых признаках значения, выходящие за логичные пределы. Для каждого показателя были заданы допустимые границы:

	•	adult_literacy_rate — от 0 до 100 %, так как уровень грамотности не может быть меньше нуля или превышать 100 %.
	•	unemployment_rate — от 0 до 100 %, потому что безработица выражается в процентах от трудоспособного населения.
	•	acceptance_rate — от 0 до 100 %, поскольку это доля поступивших студентов.
	•	economic_freedom_score — от 0 до 100, так как индекс рассчитывается именно в этой шкале.
	•	gdp — должен быть больше нуля, потому что валовый внутренний продукт не может принимать отрицательные значения.

Ошибочных значений не обнаружено,
все числовые показатели находятся в допустимых пределах.
---

**6. Проверка выбросов**
Для каждой вещественной переменной проводится анализ распределения: строятся гистограмма и boxplot, чтобы выявить наличие выбросов и степень скошенности данных. Если распределение показывает сильный перекос или значительные выбросы, применяется логарифмирование, что позволяет «сжать» диапазон значений и сделать распределение более симметричным. В дальнейшем для анализа взаимосвязей и расчёта корреляций используются именно логарифмированные значения, поскольку они обеспечивают более стабильные и корректные статистические зависимости.

1. ВВП:
Распределение: большинство стран имеют низкий или средний ВВП, распределение скошено вправо. После логарифмирования значения стали более сбалансированными.

Можно наблюдать кластеризацию стран по экономическому уровню:
- первая группа (~26–27) — развивающиеся экономики с умеренным ВВП,
- вторая (~28–29) — страны среднего уровня развития,
- третья (~31) — ведущие мировые экономики (США, Китай и др.).

Бизнес-инсайт: различия по пикам показывают, что мировая экономика сегментирована, и лишь ограниченное число стран концентрирует основную часть глобального ВВП.
Высокие значения (лог ~31) указывают на страны, способные активно инвестировать в инновации, образование и развитие человеческого капитала, в то время как большинство других экономик находятся на стадии роста и догоняющего развития. Как раз большинство университетов сосредоточено в странах с высоким ВВП — развитая экономика способствует инвестициям в образование и привлечению талантов.

2. Безработица:
Распределение:  скошено вправо — большинство стран имеют безработицу <10%. После логарифмирования данные стали симметричнее.

Бизнес-инсайт: низкий уровень безработицы указывает на устойчивую экономику и высокую занятость населения. В таких странах, как правило, выше уровень доходов и социальная стабильность, что создаёт благоприятные условия для инвестиций и развития человеческого капитала.
Сильный пик на уровне 1,5 - 2% показывает наличие глобальной стабильной тенденции к умеренной безработице, типичной для развитых и развивающихся экономик с активным трудовым рынком. Можно утверждать, что основная масса университетов находится в странах с  поддерживающимся балансом занятости, что создаёт основу для устойчивого экономического роста, повышения уровня жизни и инвестиций в образование и инновации.

3. Охват высшим образованием:
Распределение: до логарифмирования данные по охвату высшим образованием имели небольшое смещение вправо — основная масса стран сосредоточена в диапазоне 50–100%, с выраженным пиком около 75–80%. После логарифмирования форма распределения практически не изменилась, что говорит о стабильности признака и отсутствии существенных выбросов.

Бизнес-инсайт: показатель охвата высшим образованием устойчив во многих странах, что отражает сбалансированное развитие образовательных систем.
Такой пик в районе 70–80% указывает на то, что во многих странах высшее образование стало массовым и доступным, что способствует формированию квалифицированной рабочей силы и поддерживает долгосрочный экономический рост.

4. Уровень грамотности:
Распределение: показатель грамотности взрослого населения имеет выраженный перекос влево — большинство стран демонстрируют высокие значения 95–100%. После логарифмирования форма распределения почти не изменилась, что говорит о стабильности признака и его однородности.

Бизнес-инсайт: высокая грамотность населения отражает развитую образовательную систему и доступность базового образования.
Такие страны обеспечивают высокий уровень человеческого капитала, что способствует росту числа университетов, инновациям и академическому развитию.

5. Распределение:
Показатель экономической свободы имеет умеренно симметричное распределение — большинство стран находятся в диапазоне 60–80 баллов, что соответствует среднему и выше среднего уровню. После логарифмирования форма почти не изменилась, что говорит о стабильности и равномерности данных.

Бизнес-инсайт:
Высокий уровень экономической свободы характерен для развитых стран с устойчивыми институтами и прозрачными правилами рынка.
Как раз большинство университетов сосредоточено в странах с экономической свободой 65-75, что способствует автономии университетов, притоку инвестиций в образование и росту качества академических программ.

6. Стоимость обучения на бакалавриат
Распределение:
Показатель стоимости обучения на бакалавриате скошен вправо — большинство университетов имеют низкие цены до $20 000, но присутствуют редкие выбросы свыше $100 000. После логарифмирования распределение стало более симметричным и сбалансированным, что позволило уменьшить влияние экстремально дорогих вузов.

Бизнес-инсайт:
Такое распределение отражает, что рынок высшего образования ориентирован на массовый доступ, особенно в государственных и региональных вузах.
Основной сегмент ($0–20 000) обеспечивает широкий охват студентов и стабильный спрос, тогда как премиум-унив

7. Стоимость обучения на магистратуру:
Распределение:
Показатель стоимости обучения на магистратуре скошен вправо — большинство программ стоят до $30 000 в год, но есть редкие выбросы с ценами свыше $100 000. После логарифмирования распределение стало более равномерным и сбалансированным, что делает данные пригодными для дальнейшего анализа.

Бизнес-инсайт:
Основная доля университетов предлагает умеренные цены на магистратуру, ориентируясь на доступность и массовый спрос.
Однако премиальные магистерские программы формируют нишевой рынок с высокой добавленной стоимостью — туда инвестируют те, кто стремится к карьерному росту, международным возможностям и академическому престижу.

ИТОГОВЫЕ БИЗНЕС-ИНСАЙТЫ:
Страны с высокой экономической свободой и устойчивой экономикой наиболее привлекательны для открытия кампуса — там проще развивать бизнес и стабильнее спрос на образование. 
• Ирландия, Великобритания и Португалия — лучшие варианты для старта: развитая инфраструктура, открытая экономика и благоприятные условия для инвестиций. 
• Скандинавские страны подойдут для проектов с акцентом на инновации и современное обучение. 
• США и Австралия — перспективные, но сложные рынки: высокая конкуренция и большие затраты на вход, зато высокий потенциал окупаемости.
---



